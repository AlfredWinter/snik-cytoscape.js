<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>menu.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="module-filter-Filter.html">Filter</a><ul class='methods'><li data-type='method'><a href="module-filter-Filter.html#setVisibility">setVisibility</a></li></ul></li><li><a href="module-property.Property.html">Property</a></li></ul><h3>Modules</h3><ul><li><a href="module-about.html">about</a></li><li><a href="module-button.html">button</a></li><li><a href="module-classuse.html">classuse</a><ul class='methods'><li data-type='method'><a href="module-classuse.html#~roleUse">roleUse</a></li></ul></li><li><a href="module-colorschemeday.html">colorschemeday</a></li><li><a href="module-contextmenu.html">contextmenu</a><ul class='methods'><li data-type='method'><a href="module-contextmenu.html#~registerMenu">registerMenu</a></li></ul></li><li><a href="module-download.html">download</a><ul class='methods'><li data-type='method'><a href="module-download.html#.downloadGraph">downloadGraph</a></li><li data-type='method'><a href="module-download.html#.downloadLayout">downloadLayout</a></li><li data-type='method'><a href="module-download.html#.downloadPng">downloadPng</a></li><li data-type='method'><a href="module-download.html#.downloadVisibleGraph">downloadVisibleGraph</a></li></ul></li><li><a href="module-file.html">file</a><ul class='methods'><li data-type='method'><a href="module-file.html#.addFileLoadEntries">addFileLoadEntries</a></li><li data-type='method'><a href="module-file.html#.loadGraph">loadGraph</a></li><li data-type='method'><a href="module-file.html#.loadLayout">loadLayout</a></li><li data-type='method'><a href="module-file.html#.readTextFile">readTextFile</a></li><li data-type='method'><a href="module-file.html#~addLoadEntry">addLoadEntry</a></li><li data-type='method'><a href="module-file.html#~uploadJson">uploadJson</a></li></ul></li><li><a href="module-filter.html">filter</a><ul class='methods'><li data-type='method'><a href="module-filter.html#~addFilterEntries">addFilterEntries</a></li></ul></li><li><a href="module-graph.html">graph</a><ul class='methods'><li data-type='method'><a href="module-graph.html#~getSource">getSource</a></li><li data-type='method'><a href="module-graph.html#~hideNodes">hideNodes</a></li><li data-type='method'><a href="module-graph.html#~highlightEdges">highlightEdges</a></li><li data-type='method'><a href="module-graph.html#~highlightNodes">highlightNodes</a></li><li data-type='method'><a href="module-graph.html#~initGraph">initGraph</a></li><li data-type='method'><a href="module-graph.html#~invert">invert</a></li><li data-type='method'><a href="module-graph.html#~resetStyle">resetStyle</a></li><li data-type='method'><a href="module-graph.html#~setSelectedNode">setSelectedNode</a></li><li data-type='method'><a href="module-graph.html#~setSource">setSource</a></li><li data-type='method'><a href="module-graph.html#~setStarMode">setStarMode</a></li><li data-type='method'><a href="module-graph.html#~setTarget">setTarget</a></li><li data-type='method'><a href="module-graph.html#~showDoubleStar">showDoubleStar</a></li><li data-type='method'><a href="module-graph.html#~showNodes">showNodes</a></li><li data-type='method'><a href="module-graph.html#~showPath">showPath</a></li><li data-type='method'><a href="module-graph.html#~showStar">showStar</a></li><li data-type='method'><a href="module-graph.html#~showStarPath">showStarPath</a></li><li data-type='method'><a href="module-graph.html#~showWorm">showWorm</a></li></ul></li><li><a href="module-layout.html">layout</a><ul class='methods'><li data-type='method'><a href="module-layout.html#.positions">positions</a></li><li data-type='method'><a href="module-layout.html#.presetLayout">presetLayout</a></li><li data-type='method'><a href="module-layout.html#.run">run</a></li><li data-type='method'><a href="module-layout.html#.runCached">runCached</a></li><li data-type='method'><a href="module-layout.html#~storageName">storageName</a></li></ul></li><li><a href="module-loadGraphFromSparql.html">loadGraphFromSparql</a></li><li><a href="module-log.html">log</a><ul class='methods'><li data-type='method'><a href="module-log.html#.debug">debug</a></li><li data-type='method'><a href="module-log.html#.error">error</a></li><li data-type='method'><a href="module-log.html#.info">info</a></li><li data-type='method'><a href="module-log.html#.trace">trace</a></li><li data-type='method'><a href="module-log.html#.warn">warn</a></li></ul></li><li><a href="module-lunr.html">lunr</a></li><li><a href="module-main.html">main</a></li><li><a href="module-menu.html">menu</a><ul class='methods'><li data-type='method'><a href="module-menu.html#~addLoadEntries">addLoadEntries</a></li></ul></li><li><a href="module-progress.html">progress</a><ul class='methods'><li data-type='method'><a href="module-progress.html#~progress">progress</a></li></ul></li><li><a href="module-property.html">property</a><ul class='methods'><li data-type='method'><a href="module-property.html#.possible">possible</a></li></ul></li><li><a href="module-rdf.html">rdf</a><ul class='methods'><li data-type='method'><a href="module-rdf.html#.sub">sub</a></li></ul></li><li><a href="module-rdfGraph.html">rdfGraph</a></li><li><a href="module-search.html">search</a><ul class='methods'><li data-type='method'><a href="module-search.html#.search">search</a></li><li data-type='method'><a href="module-search.html#~showSearch">showSearch</a></li></ul></li><li><a href="module-sparql.html">sparql</a><ul class='methods'><li data-type='method'><a href="module-sparql.html#.ask">ask</a></li><li data-type='method'><a href="module-sparql.html#.sparql">sparql</a></li></ul></li><li><a href="module-string.html">string</a><ul class='methods'><li data-type='method'><a href="module-string.html#.abbrv">abbrv</a></li></ul></li><li><a href="module-style.html">style</a></li><li><a href="module-timer.html">timer</a></li></ul><h3>Global</h3><ul><li><a href="global.html#browsercheck">browsercheck</a></li><li><a href="global.html#colorschemenight">colorschemenight</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">menu.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
Populates the menu bar on the top.
@module */
import {MODIFIED} from "./about.js";
import * as log from "./log.js";
import * as file from "./file.js";
import * as download from "./download.js";
import {invert} from "./graph.js";
import loadGraphFromSparql from "./loadGraphFromSparql.js";

function about() {window.alert("SNIK Graph version "+MODIFIED);}
/**entries is an array of arrays of size two, entries[i][0] is either a link as a string (will be opened on another tab) or a function that will be executed. entries[i][1] is a label as a string.  */

function addLoadEntries()
{
  // TODO: implement
}

function menuData()
{
  return [
    {
      "label": "File",
      "id": "file",
      "entries":
      [
        [loadGraphFromSparql,"Load from SPARQL Endpoint"],
        [download.downloadGraph,"Save Full Graph with Layout as Cytoscape File"],
        [download.downloadVisibleGraph,"Save Visible Graph with Layout as Cytoscape File"],
        [download.downloadLayout,"Save Layout only"],
        [()=>download.downloadPng(false,false),"Save Image of Current View "],
        [()=>download.downloadPng(true,false),"Save Image of Whole Graph"],
        [()=>download.downloadPng(false,true),"Save Image of Current View (high res)"],
        [()=>download.downloadPng(true,true),"Save Image of Whole Graph (high res)"],
      ],
    },
    {
      "label": "Filter",
      "id": "filter",
      "entries": [], // filled by addFilterEntries() from filter.js
    },
    {
      "label": "Options",
      "id": "options",
      "entries": [], // filled by addOptions()
    },
    {
      "label": "Services",
      "id":"services",
      "entries":
          [
            ["http://www.snik.eu/sparql","SPARQL Endpoint"],
            ["http://lodview.it/lodview/?sparql=http%3A%2F%2Fwww.snik.eu%2Fsparql&amp;prefix=http%3A%2F%2Fwww.snik.eu%2Fontology%2F&amp;IRI=http%3A%2F%2Fwww.snik.eu%2Fontology%2Fmeta%2FTop","RDF Browser"],
            ["http://snik.eu/evaluation","Data Quality Evaluation"],
          ],
    },
    {
      "label": "Help",
      "id": "help",
      "entries":
      [
        ["manual.html","Manual"],
        ["troubleshooting.html","Troubleshooting"],
        ["contribute.html","Contribute"],
        ["http://www.snik.eu/","Project Homepage"],
        ["https://github.com/IMISE/snik-ontology/releases/download/0.3.0/snik-0.3-nociox.cys","Download Cytoscape Graph"],
        [about,"About SNIK Graph"],
        ["https://github.com/IMISE/snik-ontology/issues","Submit Feedback about the Ontology"],
        ["https://github.com/IMISE/snik-cytoscape.js/issues","Submit Feedback about the Visualization"],
      ],
    },
  ];
}

function addOptions()
{
  document.getElementById("options").innerHTML =
  `&lt;span class="dropdown-entry">&lt;input type="checkbox" autocomplete="off" id="cumulativesearch"/>cumulative search&lt;/span>
  &lt;span  class="dropdown-entry">&lt;input type="checkbox"  autocomplete="off" id="daymode"/>day mode&lt;/span> `;
  const daymode = document.getElementById("daymode");
  daymode.addEventListener("change",()=>invert(daymode.checked));
}

function addMenu()
{
  //const frag = new DocumentFragment();
  const ul = document.createElement("ul");
  ul.classList.add("dropdown-bar");
  for(const menu of menuData())
  {
    const li = document.createElement("li");
    ul.appendChild(li);
    li.classList.add("dropdown-menu");
    li.innerText=menu.label;

    const div = document.createElement("div");
    li.appendChild(div);
    div.classList.add("dropdown-content");
    div.id=menu.id;

    li.addEventListener("click",()=>
    {
      for(const otherDiv of document.getElementsByClassName("dropdown-content"))
      {
        if(div!==otherDiv) {otherDiv.classList.remove("show");}
      }
      div.classList.toggle("show");
    });

    //li.addEventListener("click",()=>div.style.display=(div.style.display==="block"?"none":"block"));

    for(const entry of menu.entries)
    {
      const a = document.createElement("a");
      a.classList.add("dropdown-entry");
      div.appendChild(a);
      a.innerHTML=entry[1];
      switch(typeof entry[0])
      {
      case 'string':
      {
        a.href=entry[0];
        a.target="_blank";
        break;
      }
      case 'function':
      {
        a.addEventListener("click",entry[0]);
        break;
      }
      default: log.error("unknown menu entry action type: "+typeof entry[0]);
      }
      //
    }
  }
  document.getElementById("top").prepend(ul);
  addOptions();
  addLoadEntries();
}

// Close the dropdown if the user clicks outside of the menu
window.onclick = function(e)
{
  if (e&amp;&amp;e.target&amp;&amp;e.target.matches&amp;&amp;!e.target.matches('.dropdown-entry')&amp;&amp;!e.target.matches('.dropdown-menu')
  &amp;&amp;!e.target.matches('input#customfilter')) // don't close while user edits the text field of the custom filter
  {
    var dropdowns = document.getElementsByClassName("dropdown-content");
    for (var d = 0; d &lt; dropdowns.length; d++)
    {
      var openDropdown = dropdowns[d];
      if (openDropdown.classList.contains('show'))
      {
        openDropdown.classList.remove('show');
      }
    }
  }
};

export default addMenu;
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Thu Feb 22 2018 22:23:13 GMT+0100 (CET) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
