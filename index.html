<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>SNIK Ontology Graph</title>
	<link rel="stylesheet" type="text/css" href="css/style.css" media="screen" />
	<link rel="stylesheet" type="text/css" href="css/overlay.css" media="screen" />
	<!--<script src="https://cdn.polyfill.io/v2/polyfill.min.js"></script>--> <!-- support older browsers -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.1.2/cytoscape.min.js"></script>
	<script src="lib/cytoscape-cxtmenu.js"></script>
	<script src="lib/cola.min.js"></script> <!-- Additional layouts. -->
	<script src="lib/cytoscape-cola.js"></script>
	<link href ="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css" rel = "stylesheet">
</head>

<body>
	<noscript><h1>JavaScript is off. <a href="http://enable-javascript.com/">Please enable</a> to view site.</h1></noscript>

	<script src="./js/browsercheck.js"></script>
	<script>
	var graph, search, menu,sparql
	</script>
	<script type="module">
	import {initGraphFromFile} from "./js/initGraphFromFile.js";
	import {initGraphFromSparql} from "./js/initGraphFromSparql.js";
	import addFilterEntries from "./js/filter.js";
	import addMenu from "./js/menu.js";

	const INIT_GRAPH_FROM_SPARQL = true;
	(INIT_GRAPH_FROM_SPARQL?initGraphFromSparql():initGraphFromFile())
	.then((cy)=>
	{
		addMenu();
		addFilterEntries(cy,document.getElementById("filter"));
	})
	.catch(e=>
	{
		console.error(e,"menu init error");
	});
	document.querySelector('#closelink').addEventListener('click', search.hideSearchResults); // for unknown reasons, using onclick directly results in an undefined function
	</script>

	<div id="top">

		<form id="search" method="post" onsubmit="search.hideSearchResults();search.search(this.children.query.value);return false;"><!-- Return false to prevent page reload. -->
			<input type="text" name="query" id="query" list="matches" placeholder="🔍 Class Name"/>
		</form>

		<form id="buttons">
		</form>
	</div>

	<div id="overlay" class="overlay">
		<h2 id="h2:searchresults">Search Results</h2>
		<a href="javascript:void(0)" id="closelink" class="closebtn">&times;</a>
		<table id="tab:searchresults"></table>
	</div>

	<div id="cy" style="width:100%;height:100vh;background-color:black;"></div>

</body>
</html>
